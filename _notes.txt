//function of more-details - need to see the details of the Scheduled Inspection
//disabled users can still login (must not)

//preferred schedule - add time as well.

Notify Clients

//get logs that involves schedules of logged user. notify users of their action or other people action

//after inspection
//if certificate is now ready for download.

select  l.*
   from `inspection_schedule` ins
   join `logs` as l
	on (ins.schedule_id = l.schedule_id)
left join general_info gi
  on ins.gen_info_id = gi.gen_info_id
 left join users u 
  on gi.owner_id = u.user_id
   where l.log_action = 'sch'
and   u.user_id = 13
   

Notify Inspector
//if an fsed-9f is assigned
//if the assigned is already acknowledged.
//if the assigned is ready for inspection

notify Admin - Reco approver - Approver
// if there is an action on their part.



SELECT
    `inspection_schedule`.`schedule_id` AS `schedule_id`,
    `inspection_schedule`.`order_number` AS `order_number`,
    `inspection_schedule`.`scheduled_date` AS `schedule_date`,
    `inspection_schedule`.`inspection_sched_status` AS `status`,
    `inspection_schedule`.`HasClientAck` AS `HasClientAck`,
    `inspection_schedule`.`hasInspectorAck` AS `hasInspectorAck`,
    `inspection_schedule`.`hasRecommendingApproval` AS `hasRecommendingApproval`,
    `inspection_schedule`.`hasFinalApproval` AS `hasFinalApproval`,
    CASE WHEN `inspection_schedule`.`HasClientAck` = 'Y' AND `inspection_schedule`.`hasInspectorAck` = '0' AND `inspection_schedule`.`hasRecommendingApproval` = '0' AND `inspection_schedule`.`hasFinalApproval` = '0' THEN 'Client Acknowledged' WHEN `inspection_schedule`.`HasClientAck` = 'Y' AND `inspection_schedule`.`hasInspectorAck` = '1' AND `inspection_schedule`.`hasRecommendingApproval` = '0' AND `inspection_schedule`.`hasFinalApproval` = '0' THEN 'Inspector Acknowledged' WHEN `inspection_schedule`.`HasClientAck` = 'Y' AND `inspection_schedule`.`hasInspectorAck` = '1' AND `inspection_schedule`.`hasRecommendingApproval` = '1' AND `inspection_schedule`.`hasFinalApproval` = '0' THEN 'Recommended' WHEN `inspection_schedule`.`HasClientAck` = 'Y' AND `inspection_schedule`.`hasInspectorAck` = '1' AND `inspection_schedule`.`hasRecommendingApproval` = '1' AND `inspection_schedule`.`hasFinalApproval` = '1' THEN 'Approved' ELSE 'Pending'
END AS `progress`
FROM
    `inspection_schedule`